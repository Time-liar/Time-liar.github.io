<!DOCTYPE html><html lang=zh class=has-navbar-fixed-top><head><meta charset=utf-8><title>关于匿名内部类的坑 | Timeliar&#39;s Blog</title><meta name=author content=Timeliar><meta name=description content=还有很多代码要写><meta name=viewport content="width=device-width, initial-scale=1, maximum-scale=1"><meta property=og:title content=关于匿名内部类的坑><meta property=og:site_name content="Timeliar&#39;s Blog"><meta property=og:image><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><link rel=alternate href=/atom.xml title="Timeliar's Blog" type=application/atom+xml><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/bulma@0.9.1/css/bulma.min.css><style>@-webkit-keyframes spinAround{from{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}@keyframes spinAround{from{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}.timeline{display:flex;flex-direction:column}.timeline .timeline-header{width:4em;min-width:4em;max-width:8em;word-wrap:normal;text-align:center;display:flex;justify-content:center}.timeline .timeline-item{display:flex;display:-webkit-flex;position:relative;margin-left:2em;padding-bottom:2em}.timeline .timeline-item::before{content:"";background-color:#dbdbdb;display:block;width:1px;height:100%;position:absolute;left:-.5px;top:0}.timeline .timeline-item .timeline-marker{position:absolute;background:#dbdbdb;border:1px solid #dbdbdb;border-radius:100%;content:"";display:block;height:12px;-webkit-transform:translateX(-50%);transform:translateX(-50%);top:1.2rem;width:12px}.timeline .timeline-item .timeline-marker.is-image{background:#dbdbdb;border:1px solid #dbdbdb;border-radius:100%;display:block;overflow:hidden}.timeline .timeline-item .timeline-marker.is-image.is-16x16{height:16px;width:16px}.timeline .timeline-item .timeline-marker.is-image.is-24x24{height:24px;width:24px}.timeline .timeline-item .timeline-marker.is-image.is-32x32{height:32px;width:32px}.timeline .timeline-item .timeline-marker.is-image.is-48x48{height:48px;width:48px}.timeline .timeline-item .timeline-marker.is-image.is-64x64{height:64px;width:64px}.timeline .timeline-item .timeline-marker.is-image.is-96x96{height:96px;width:96px}.timeline .timeline-item .timeline-marker.is-image.is-128x128{height:128px;width:128px}.timeline .timeline-item .timeline-marker.is-icon{display:flex;align-items:center;justify-content:center;height:24px;width:24px;background:#dbdbdb;border:1px solid #dbdbdb;border-radius:100%;padding:.5rem}.timeline .timeline-item .timeline-marker.is-white,.timeline .timeline-item .timeline-marker.is-white.is-icon,.timeline .timeline-item .timeline-marker.is-white.is-outlined{border-color:#fff!important;background-color:#fff!important}.timeline .timeline-item .timeline-marker.is-icon>*{font-size:.75rem!important}.timeline .timeline-item .timeline-marker.is-outlined .image,.timeline .timeline-item .timeline-marker.is-outlined.is-icon{background:#fff}.timeline .timeline-item .timeline-marker.is-outlined.is-icon>*{color:#dbdbdb}.timeline .timeline-item .timeline-marker.is-white .image{border-color:#fff!important}.timeline .timeline-item .timeline-marker.is-white.is-icon>*{color:#0a0a0a!important}.timeline .timeline-item .timeline-marker.is-black.is-icon>*,.timeline .timeline-item .timeline-marker.is-white.is-outlined.is-icon>*{color:#fff!important}.timeline .timeline-item .timeline-marker.is-white.is-outlined .image,.timeline .timeline-item .timeline-marker.is-white.is-outlined.is-icon{background-color:#fff!important}.timeline .timeline-item .timeline-marker.is-black,.timeline .timeline-item .timeline-marker.is-black.is-icon{background-color:#0a0a0a!important;border-color:#0a0a0a!important}.timeline .timeline-item .timeline-marker.is-black .image{border-color:#0a0a0a!important}.timeline .timeline-item .timeline-marker.is-black.is-outlined{background-color:#fff!important;border-color:#0a0a0a!important}.timeline .timeline-item .timeline-marker.is-black.is-outlined .image,.timeline .timeline-item .timeline-marker.is-black.is-outlined.is-icon{background-color:#fff!important}.timeline .timeline-item .timeline-marker.is-light,.timeline .timeline-item .timeline-marker.is-light.is-icon{background-color:#f5f5f5!important;border-color:#f5f5f5!important}.timeline .timeline-item .timeline-marker.is-black.is-outlined.is-icon>*{color:#0a0a0a!important}.timeline .timeline-item .timeline-marker.is-light .image{border-color:#f5f5f5!important}.timeline .timeline-item .timeline-marker.is-light.is-icon>*{color:#363636!important}.timeline .timeline-item .timeline-marker.is-dark.is-icon>*,.timeline .timeline-item .timeline-marker.is-light.is-outlined.is-icon>*{color:#f5f5f5!important}.timeline .timeline-item .timeline-marker.is-light.is-outlined{background-color:#fff!important;border-color:#f5f5f5!important}.timeline .timeline-item .timeline-marker.is-light.is-outlined .image,.timeline .timeline-item .timeline-marker.is-light.is-outlined.is-icon{background-color:#fff!important}.timeline .timeline-item .timeline-marker.is-dark,.timeline .timeline-item .timeline-marker.is-dark.is-icon{background-color:#363636!important;border-color:#363636!important}.timeline .timeline-item .timeline-marker.is-dark .image{border-color:#363636!important}.timeline .timeline-item .timeline-marker.is-dark.is-outlined{background-color:#fff!important;border-color:#363636!important}.timeline .timeline-item .timeline-marker.is-dark.is-outlined .image,.timeline .timeline-item .timeline-marker.is-dark.is-outlined.is-icon{background-color:#fff!important}.timeline .timeline-item .timeline-marker.is-primary,.timeline .timeline-item .timeline-marker.is-primary.is-icon{background-color:#00d1b2!important;border-color:#00d1b2!important}.timeline .timeline-item .timeline-marker.is-dark.is-outlined.is-icon>*{color:#363636!important}.timeline .timeline-item .timeline-marker.is-primary .image{border-color:#00d1b2!important}.timeline .timeline-item .timeline-marker.is-primary.is-icon>*{color:#fff!important}.timeline .timeline-item .timeline-marker.is-primary.is-outlined{background-color:#fff!important;border-color:#00d1b2!important}.timeline .timeline-item .timeline-marker.is-primary.is-outlined .image,.timeline .timeline-item .timeline-marker.is-primary.is-outlined.is-icon{background-color:#fff!important}.timeline .timeline-item .timeline-marker.is-link,.timeline .timeline-item .timeline-marker.is-link.is-icon{background-color:#3273dc!important;border-color:#3273dc!important}.timeline .timeline-item .timeline-marker.is-primary.is-outlined.is-icon>*{color:#00d1b2!important}.timeline .timeline-item .timeline-marker.is-link .image{border-color:#3273dc!important}.timeline .timeline-item .timeline-marker.is-link.is-icon>*{color:#fff!important}.timeline .timeline-item .timeline-marker.is-link.is-outlined{background-color:#fff!important;border-color:#3273dc!important}.timeline .timeline-item .timeline-marker.is-link.is-outlined .image,.timeline .timeline-item .timeline-marker.is-link.is-outlined.is-icon{background-color:#fff!important}.timeline .timeline-item .timeline-marker.is-info,.timeline .timeline-item .timeline-marker.is-info.is-icon{background-color:#209cee!important;border-color:#209cee!important}.timeline .timeline-item .timeline-marker.is-link.is-outlined.is-icon>*{color:#3273dc!important}.timeline .timeline-item .timeline-marker.is-info .image{border-color:#209cee!important}.timeline .timeline-item .timeline-marker.is-info.is-icon>*{color:#fff!important}.timeline .timeline-item .timeline-marker.is-info.is-outlined{background-color:#fff!important;border-color:#209cee!important}.timeline .timeline-item .timeline-marker.is-info.is-outlined .image,.timeline .timeline-item .timeline-marker.is-info.is-outlined.is-icon{background-color:#fff!important}.timeline .timeline-item .timeline-marker.is-success,.timeline .timeline-item .timeline-marker.is-success.is-icon{background-color:#23d160!important;border-color:#23d160!important}.timeline .timeline-item .timeline-marker.is-info.is-outlined.is-icon>*{color:#209cee!important}.timeline .timeline-item .timeline-marker.is-success .image{border-color:#23d160!important}.timeline .timeline-item .timeline-marker.is-success.is-icon>*{color:#fff!important}.timeline .timeline-item .timeline-marker.is-success.is-outlined{background-color:#fff!important;border-color:#23d160!important}.timeline .timeline-item .timeline-marker.is-success.is-outlined .image,.timeline .timeline-item .timeline-marker.is-success.is-outlined.is-icon{background-color:#fff!important}.timeline .timeline-item .timeline-marker.is-warning,.timeline .timeline-item .timeline-marker.is-warning.is-icon{background-color:#ffdd57!important;border-color:#ffdd57!important}.timeline .timeline-item .timeline-marker.is-success.is-outlined.is-icon>*{color:#23d160!important}.timeline .timeline-item .timeline-marker.is-warning .image{border-color:#ffdd57!important}.timeline .timeline-item .timeline-marker.is-warning.is-icon>*{color:rgba(0,0,0,.7)!important}.timeline .timeline-item .timeline-marker.is-warning.is-outlined{background-color:#fff!important;border-color:#ffdd57!important}.timeline .timeline-item .timeline-marker.is-warning.is-outlined .image,.timeline .timeline-item .timeline-marker.is-warning.is-outlined.is-icon{background-color:#fff!important}.timeline .timeline-item .timeline-marker.is-danger,.timeline .timeline-item .timeline-marker.is-danger.is-icon{background-color:#ff3860!important;border-color:#ff3860!important}.timeline .timeline-item .timeline-marker.is-warning.is-outlined.is-icon>*{color:#ffdd57!important}.timeline .timeline-item .timeline-marker.is-danger .image{border-color:#ff3860!important}.timeline .timeline-item .timeline-marker.is-danger.is-icon>*{color:#fff!important}.timeline .timeline-item .timeline-marker.is-danger.is-outlined{background-color:#fff!important;border-color:#ff3860!important}.timeline .timeline-item .timeline-marker.is-danger.is-outlined .image,.timeline .timeline-item .timeline-marker.is-danger.is-outlined.is-icon{background-color:#fff!important}.timeline .timeline-item .timeline-marker.is-danger.is-outlined.is-icon>*{color:#ff3860!important}.timeline .timeline-item .timeline-content{padding:1em 0 0 2em}.timeline .timeline-item .timeline-content .heading{font-weight:600}.timeline .timeline-item.is-white::before{background-color:#fff}.timeline .timeline-item.is-black::before{background-color:#0a0a0a}.timeline .timeline-item.is-light::before{background-color:#f5f5f5}.timeline .timeline-item.is-dark::before{background-color:#363636}.timeline .timeline-item.is-primary::before{background-color:#00d1b2}.timeline .timeline-item.is-link::before{background-color:#3273dc}.timeline .timeline-item.is-info::before{background-color:#209cee}.timeline .timeline-item.is-success::before{background-color:#23d160}.timeline .timeline-item.is-warning::before{background-color:#ffdd57}.timeline .timeline-item.is-danger::before{background-color:#ff3860}.timeline.is-centered .timeline-header{display:flex;width:100%;align-self:center}.timeline.is-centered .timeline-item{width:50%;align-self:flex-end;flex-direction:row}.timeline.is-centered .timeline-item:nth-of-type(2n){align-self:flex-start;flex-direction:row-reverse;margin-left:0;margin-right:2em}.timeline.is-centered .timeline-item:nth-of-type(2n)::before{right:-.5px;left:auto}.timeline.is-centered .timeline-item:nth-of-type(2n) .timeline-marker{-webkit-transform:translateX(50%);transform:translateX(50%)}.timeline.is-centered .timeline-item:nth-of-type(2n) .timeline-content{padding:1em 2em 0 0;text-align:right;display:flex;flex-direction:column;align-items:flex-end;flex-basis:100%}.timeline.is-centered .timeline-item:nth-of-type(2n+1)::before{content:"";background-color:#dbdbdb;display:block;width:1px;height:100%;position:absolute;top:0}.timeline.is-centered .timeline-item.is-white::before{background-color:#fff}.timeline.is-centered .timeline-item.is-black::before{background-color:#0a0a0a}.timeline.is-centered .timeline-item.is-light::before{background-color:#f5f5f5}.timeline.is-centered .timeline-item.is-dark::before{background-color:#363636}.timeline.is-centered .timeline-item.is-primary::before{background-color:#00d1b2}.timeline.is-centered .timeline-item.is-link::before{background-color:#3273dc}.timeline.is-centered .timeline-item.is-info::before{background-color:#209cee}.timeline.is-centered .timeline-item.is-success::before{background-color:#23d160}.timeline.is-centered .timeline-item.is-warning::before{background-color:#ffdd57}.timeline.is-centered .timeline-item.is-danger::before{background-color:#ff3860}.timeline.is-rtl{justify-content:flex-end;align-items:flex-end}.timeline.is-rtl .timeline-item{justify-content:flex-end;flex-direction:row;border-left:none;margin-left:0;margin-right:2em}.timeline.is-rtl .timeline-item::before{right:0;left:auto}.timeline.is-rtl .timeline-item .timeline-marker,.timeline.is-rtl .timeline-item .timeline-marker.is-image.is-128x128,.timeline.is-rtl .timeline-item .timeline-marker.is-image.is-16x16,.timeline.is-rtl .timeline-item .timeline-marker.is-image.is-24x24,.timeline.is-rtl .timeline-item .timeline-marker.is-image.is-32x32,.timeline.is-rtl .timeline-item .timeline-marker.is-image.is-48x48,.timeline.is-rtl .timeline-item .timeline-marker.is-image.is-64x64,.timeline.is-rtl .timeline-item .timeline-marker.is-image.is-96x96{-webkit-transform:translateX(50%);transform:translateX(50%)}.timeline.is-rtl .timeline-item .timeline-content{padding:1em 2em 0 0;text-align:right}.timeline.no-headers .timeline-item.is-first::before{height:calc(100% - 1.2rem);top:1.2rem}.timeline.no-headers .timeline-item.is-last::before{height:1.2rem}</style><link rel=stylesheet href=https://cdn.bootcdn.net/ajax/libs/font-awesome/5.15.2/css/all.min.css><style>.token.number,.token.tag{align-items:unset!important;background-color:unset!important;border-radius:unset!important;display:unset!important;font-size:unset!important;height:unset!important;min-width:unset!important;padding:unset!important;text-align:unset!important;vertical-align:unset!important;margin-right:unset!important}.columns,.token.number,.token.tag{margin-right:unset!important}.is-sticky{position:sticky;top:60px}.token.number{color:#729ad6!important;justify-content:unset!important}.token.tag{justify-content:unset!important}.menu-list-level-2,.menu-list-level-3,.menu-list-level-4,.menu-list-level-5,.menu-list-level-6{padding-left:.5em}ol.menu-list,ol.menu-list-child{list-style-type:none!important}.columns{margin-left:unset!important}#comment-container{width:100%!important}.v[data-class=v] .vwrap{border:2px solid #aaa!important}.v[data-class=v] .vbtn{border:2px solid #bbb!important}.card-neck{background-color:transparent;align-items:stretch;box-shadow:0 .125em .25em rgb(10 10 10 / 10%);display:flex;padding:.5em}</style><style>#artDetail .note.danger::before,#artDetail .note.default::before,#artDetail .note.info::before,#artDetail .note.primary::before,#artDetail .note.success::before,#artDetail .note.warning::before,#artDetail ol>li.quiz.show.false::after,#artDetail ol>li.quiz.show.true::after,#artDetail ol>li.quiz>ul.options li.right::after,#artDetail ol>li.quiz>ul.options li.wrong::after,#artDetail ul li.task-list-item input[type=checkbox]+label::before,#artDetail ul li.task-list-item input[type=checkbox]:checked+label::before,.ico-fa-angle-double-down:before,.ico-fa-angle-double-left:before,.ico-fa-angle-double-right:before,.ico-fa-angle-double-up:before,.ico-fa-angle-down:before,.ico-fa-angle-left:before,.ico-fa-angle-right:before,.ico-fa-angle-up:before,.ico-fa-arrow-alt-circle-down:before,.ico-fa-arrow-alt-circle-left:before,.ico-fa-arrow-alt-circle-right:before,.ico-fa-arrow-alt-circle-up:before,.ico-fa-arrow-circle-down:before,.ico-fa-arrow-circle-left:before,.ico-fa-arrow-circle-right:before,.ico-fa-arrow-circle-up:before,.ico-fa-arrow-down:before,.ico-fa-arrow-left:before,.ico-fa-arrow-right:before,.ico-fa-arrow-up:before,.ico-fa-arrows-alt-h:before,.ico-fa-arrows-alt-v:before,.ico-fa-arrows-alt:before,.ico-fa-backward:before,.ico-fa-check-circle:before,.ico-fa-check-double:before,.ico-fa-check-square:before,.ico-fa-check:before,.ico-fa-exclamation-circle:before,.ico-fa-exclamation-triangle:before,.ico-fa-exclamation:before,.ico-fa-first-order-alt:before,.ico-fa-first-order:before,.ico-fa-forward:before,.ico-fa-info-circle:before,.ico-fa-minus-circle:before,.ico-fa-minus-square:before,.ico-fa-minus:before,.ico-fa-pause-circle:before,.ico-fa-play-circle:before,.ico-fa-play:before,.ico-fa-plus-circle:before,.ico-fa-plus-square:before,.ico-fa-random:before,.ico-fa-times-circle:before,.ico-fa-times:before,.ico-fa-truck-loading:before,.ico-fa-truck-monster:before,.ico-fa-truck-moving:before,.ico-fa-truck-pickup:before,.ico-fa-truck:before,.ico-fa-volume-down:before,.ico-fa-volume-mute:before,.ico-fa-volume-off:before,.ico-fa-volume-up:before,.ico-fas,.player-info .backward::before,.player-info .forward::before,.player-info .mode.loop::before,.player-info .mode.order::before,.player-info .mode.random::before,.player-info .play-pause::before,.player-info .volume.off::before,.player-info .volume.on::before,.player-info ol>li.current::before,.playing .player-info .play-pause::before,.tabs .show-btn::before,details summary::before,details[open] summary::before{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:inline-block;font-style:normal;font-variant:normal;text-rendering:auto;line-height:2;font-family:'Font Awesome 5 Free';font-weight:900}.ico-fa-pause-circle:before,.playing .player-info .play-pause::before{content:'\f28b'}.ico-fa-forward:before,.player-info .forward::before{content:'\f04e'}.ico-fa-first-order:before,.player-info .mode.order::before{content:'\f2b0'}.ico-fa-first-order-alt:before{content:'\f50a'}.ico-fa-play:before,.player-info ol>li.current::before{content:'\f04b'}.ico-fa-play-circle:before,.player-info .play-pause::before{content:'\f144'}.ico-fa-truck:before{content:'\f0d1'}.ico-fa-truck-loading:before,.player-info .mode.loop::before{content:'\f4de'}.ico-fa-truck-monster:before{content:'\f63b'}.ico-fa-truck-moving:before{content:'\f4df'}.ico-fa-truck-pickup:before{content:'\f63c'}.ico-fa-random:before,.player-info .mode.random::before{content:'\f074'}.ico-fa-volume-down:before{content:'\f027'}.ico-fa-volume-mute:before,.player-info .volume.on::before{content:'\f6a9'}.ico-fa-volume-off:before,.player-info .volume.off::before{content:'\f026'}.ico-fa-volume-up:before{content:'\f028'}.ico-fa-backward:before,.player-info .backward::before{content:'\f04a'}.ico-fa-minus:before{content:'\f068'}#artDetail .note.danger::before,.ico-fa-minus-circle:before{content:'\f056'}.ico-fa-minus-square:before{content:'\f146'}.ico-fa-exclamation:before{content:'\f12a'}#artDetail .note.warning::before,.ico-fa-exclamation-circle:before{content:'\f06a'}.ico-fa-exclamation-triangle:before{content:'\f071'}#artDetail .note.info::before,.ico-fa-info-circle:before{content:'\f05a'}#artDetail .note.primary::before,.ico-fa-plus-circle:before{content:'\f055'}.ico-fa-plus-square:before{content:'\f0fe'}.ico-fa-arrow-alt-circle-down:before{content:'\f358'}.ico-fa-arrow-alt-circle-left:before{content:'\f359'}.ico-fa-arrow-alt-circle-right:before{content:'\f35a'}.ico-fa-arrow-alt-circle-up:before{content:'\f35b'}.ico-fa-arrow-circle-down:before{content:'\f0ab'}.ico-fa-arrow-circle-left:before{content:'\f0a8'}#artDetail .note.default::before,.ico-fa-arrow-circle-right:before{content:'\f0a9'}.ico-fa-arrow-circle-up:before{content:'\f0aa'}.ico-fa-arrow-down:before{content:'\f063'}.ico-fa-arrow-left:before{content:'\f060'}.ico-fa-arrow-right:before{content:'\f061'}.ico-fa-arrow-up:before,.tabs .show-btn::before{content:'\f062'}.ico-fa-arrows-alt:before{content:'\f0b2'}.ico-fa-arrows-alt-h:before{content:'\f337'}.ico-fa-arrows-alt-v:before{content:'\f338'}.ico-fa-angle-double-down:before{content:'\f103'}.ico-fa-angle-double-left:before{content:'\f100'}.ico-fa-angle-double-right:before{content:'\f101'}.ico-fa-angle-double-up:before{content:'\f102'}.ico-fa-angle-down:before,details[open] summary::before{content:'\f107'}.ico-fa-angle-left:before{content:'\f104'}.ico-fa-angle-right:before,details summary::before{content:'\f105'}.ico-fa-angle-up:before{content:'\f106'}#artDetail ol>li.quiz.show.false::after,#artDetail ol>li.quiz>ul.options li.wrong::after,.ico-fa-times:before{content:'\f00d'}#artDetail ul li.task-list-item input[type=checkbox]+label::before,.ico-fa-times-circle:before{content:'\f057'}#artDetail ol>li.quiz.show.true::after,#artDetail ol>li.quiz>ul.options li.right::after,.ico-fa-check:before{content:'\f00c'}#artDetail .note.success::before,#artDetail ul li.task-list-item input[type=checkbox]:checked+label::before,.ico-fa-check-circle:before{content:'\f058'}.ico-fa-check-double:before{content:'\f560'}.ico-fa-check-square:before{content:'\f14a'}.rotate{animation:rotate 6s linear infinite}.beat{animation:beat 1.33s ease-in-out infinite}.flash{animation:flash 6s cubic-bezier(.22,.61,.36,1) infinite}.shake{animation:shake 1s}.fade-in,.tabs .tab,details[open]>div{animation:fadeIn .5s}.fade-out{animation:fadeOut .3s}.up-down{animation:UpDown 2s infinite}.down-up{animation:DownUp 2s infinite}#artDetail ol>li.quiz.show .note,#artDetail ol>li.quiz.show blockquote,.slide{animation:slide .5s}.slide-up-in{animation:slideUpIn .3s}.slide-up-big-in{animation:slideUpBigIn .5s}.slide-right-in{animation:slideRightIn .3s}.slide-left-in{animation:slideLeftIn .3s}.slide-down-in{animation:slideDownIn .3s}.blur{animation:blur .8s ease-in-out forwards}.elastic{animation:elastic 1s}@-moz-keyframes rotate{from{transform:rotate(0)}to{transform:rotate(360deg)}}@-webkit-keyframes rotate{from{transform:rotate(0)}to{transform:rotate(360deg)}}@-o-keyframes rotate{from{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes rotate{from{transform:rotate(0)}to{transform:rotate(360deg)}}@-moz-keyframes rotating{from{transform:rotate(720deg)}to{transform:none}}@-webkit-keyframes rotating{from{transform:rotate(720deg)}to{transform:none}}@-o-keyframes rotating{from{transform:rotate(720deg)}to{transform:none}}@keyframes rotating{from{transform:rotate(720deg)}to{transform:none}}@-moz-keyframes rotate-needle-pause{0%{transform:rotateZ(-35deg)}100%{transform:rotateZ(-60deg)}}@-webkit-keyframes rotate-needle-pause{0%{transform:rotateZ(-35deg)}100%{transform:rotateZ(-60deg)}}@-o-keyframes rotate-needle-pause{0%{transform:rotateZ(-35deg)}100%{transform:rotateZ(-60deg)}}@keyframes rotate-needle-pause{0%{transform:rotateZ(-35deg)}100%{transform:rotateZ(-60deg)}}@-moz-keyframes rotate-needle-resume{0%{transform:rotateZ(-60deg)}100%{transform:rotateZ(-35deg)}}@-webkit-keyframes rotate-needle-resume{0%{transform:rotateZ(-60deg)}100%{transform:rotateZ(-35deg)}}@-o-keyframes rotate-needle-resume{0%{transform:rotateZ(-60deg)}100%{transform:rotateZ(-35deg)}}@keyframes rotate-needle-resume{0%{transform:rotateZ(-60deg)}100%{transform:rotateZ(-35deg)}}@-moz-keyframes beat{0%,100%{transform:scale(1)}10%,30%{transform:scale(.9)}20%,40%,50%,60%,70%,80%{transform:scale(1.1)}}@-webkit-keyframes beat{0%,100%{transform:scale(1)}10%,30%{transform:scale(.9)}20%,40%,50%,60%,70%,80%{transform:scale(1.1)}}@-o-keyframes beat{0%,100%{transform:scale(1)}10%,30%{transform:scale(.9)}20%,40%,50%,60%,70%,80%{transform:scale(1.1)}}@keyframes beat{0%,100%{transform:scale(1)}10%,30%{transform:scale(.9)}20%,40%,50%,60%,70%,80%{transform:scale(1.1)}}@-moz-keyframes flash{0%,50%,to{opacity:1}25%,75%{opacity:0}}@-webkit-keyframes flash{0%,50%,to{opacity:1}25%,75%{opacity:0}}@-o-keyframes flash{0%,50%,to{opacity:1}25%,75%{opacity:0}}@keyframes flash{0%,50%,to{opacity:1}25%,75%{opacity:0}}@-moz-keyframes shake{from,to{transform:translate3d(0,0,0)}10%,30%,50%,70%,90%{transform:translate3d(-10px,0,0)}20%,40%,60%,80%{transform:translate3d(10px,0,0)}}@-webkit-keyframes shake{from,to{transform:translate3d(0,0,0)}10%,30%,50%,70%,90%{transform:translate3d(-10px,0,0)}20%,40%,60%,80%{transform:translate3d(10px,0,0)}}@-o-keyframes shake{from,to{transform:translate3d(0,0,0)}10%,30%,50%,70%,90%{transform:translate3d(-10px,0,0)}20%,40%,60%,80%{transform:translate3d(10px,0,0)}}@keyframes shake{from,to{transform:translate3d(0,0,0)}10%,30%,50%,70%,90%{transform:translate3d(-10px,0,0)}20%,40%,60%,80%{transform:translate3d(10px,0,0)}}@-moz-keyframes fadeIn{0%{opacity:0}100%{opacity:1}}@-webkit-keyframes fadeIn{0%{opacity:0}100%{opacity:1}}@-o-keyframes fadeIn{0%{opacity:0}100%{opacity:1}}@keyframes fadeIn{0%{opacity:0}100%{opacity:1}}@-moz-keyframes fadeOut{0%{opacity:1}100%{opacity:0}}@-webkit-keyframes fadeOut{0%{opacity:1}100%{opacity:0}}@-o-keyframes fadeOut{0%{opacity:1}100%{opacity:0}}@keyframes fadeOut{0%{opacity:1}100%{opacity:0}}@-moz-keyframes blur{0%{filter:blur(10px)}to{filter:blur(0)}}@-webkit-keyframes blur{0%{filter:blur(10px)}to{filter:blur(0)}}@-o-keyframes blur{0%{filter:blur(10px)}to{filter:blur(0)}}@keyframes blur{0%{filter:blur(10px)}to{filter:blur(0)}}@-moz-keyframes blur-dark{0%{filter:blur(10px) brightness(.9)}to{filter:blur(0) brightness(.9)}}@-webkit-keyframes blur-dark{0%{filter:blur(10px) brightness(.9)}to{filter:blur(0) brightness(.9)}}@-o-keyframes blur-dark{0%{filter:blur(10px) brightness(.9)}to{filter:blur(0) brightness(.9)}}@keyframes blur-dark{0%{filter:blur(10px) brightness(.9)}to{filter:blur(0) brightness(.9)}}@-moz-keyframes UpDown{0%,100%{opacity:.8;transform:translateY(10px)}50%{opacity:.4;transform:translateY(0)}}@-webkit-keyframes UpDown{0%,100%{opacity:.8;transform:translateY(10px)}50%{opacity:.4;transform:translateY(0)}}@-o-keyframes UpDown{0%,100%{opacity:.8;transform:translateY(10px)}50%{opacity:.4;transform:translateY(0)}}@keyframes UpDown{0%,100%{opacity:.8;transform:translateY(10px)}50%{opacity:.4;transform:translateY(0)}}@-moz-keyframes DownUp{0%,100%{opacity:.8;transform:rotate(180deg) translateY(0)}50%{opacity:.4;transform:rotate(180deg) translateY(-10px)}}@-webkit-keyframes DownUp{0%,100%{opacity:.8;transform:rotate(180deg) translateY(0)}50%{opacity:.4;transform:rotate(180deg) translateY(-10px)}}@-o-keyframes DownUp{0%,100%{opacity:.8;transform:rotate(180deg) translateY(0)}50%{opacity:.4;transform:rotate(180deg) translateY(-10px)}}@keyframes DownUp{0%,100%{opacity:.8;transform:rotate(180deg) translateY(0)}50%{opacity:.4;transform:rotate(180deg) translateY(-10px)}}@-moz-keyframes slide{0%{opacity:0;transform:scaleY(0)}100%{opacity:1;transform:scaleY(1)}}@-webkit-keyframes slide{0%{opacity:0;transform:scaleY(0)}100%{opacity:1;transform:scaleY(1)}}@-o-keyframes slide{0%{opacity:0;transform:scaleY(0)}100%{opacity:1;transform:scaleY(1)}}@keyframes slide{0%{opacity:0;transform:scaleY(0)}100%{opacity:1;transform:scaleY(1)}}@-moz-keyframes slideRightIn{0%{opacity:0;transform:translateX(50%)}to{opacity:1;transform:translateX(0)}}@-webkit-keyframes slideRightIn{0%{opacity:0;transform:translateX(50%)}to{opacity:1;transform:translateX(0)}}@-o-keyframes slideRightIn{0%{opacity:0;transform:translateX(50%)}to{opacity:1;transform:translateX(0)}}@keyframes slideRightIn{0%{opacity:0;transform:translateX(50%)}to{opacity:1;transform:translateX(0)}}@-moz-keyframes slideLeftIn{0%{opacity:0;transform:translateX(-50%)}to{opacity:1;transform:translateX(0)}}@-webkit-keyframes slideLeftIn{0%{opacity:0;transform:translateX(-50%)}to{opacity:1;transform:translateX(0)}}@-o-keyframes slideLeftIn{0%{opacity:0;transform:translateX(-50%)}to{opacity:1;transform:translateX(0)}}@keyframes slideLeftIn{0%{opacity:0;transform:translateX(-50%)}to{opacity:1;transform:translateX(0)}}@-moz-keyframes slideUpIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}@-webkit-keyframes slideUpIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}@-o-keyframes slideUpIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}@keyframes slideUpIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}@-moz-keyframes slideUpBigIn{0%{opacity:0;transform:translateY(80px)}100%{opacity:1;transform:translateY(0)}}@-webkit-keyframes slideUpBigIn{0%{opacity:0;transform:translateY(80px)}100%{opacity:1;transform:translateY(0)}}@-o-keyframes slideUpBigIn{0%{opacity:0;transform:translateY(80px)}100%{opacity:1;transform:translateY(0)}}@keyframes slideUpBigIn{0%{opacity:0;transform:translateY(80px)}100%{opacity:1;transform:translateY(0)}}@-moz-keyframes slideDownIn{0%{opacity:0;transform:translateY(-18px)}100%{opacity:1;transform:translateY(0)}}@-webkit-keyframes slideDownIn{0%{opacity:0;transform:translateY(-18px)}100%{opacity:1;transform:translateY(0)}}@-o-keyframes slideDownIn{0%{opacity:0;transform:translateY(-18px)}100%{opacity:1;transform:translateY(0)}}@keyframes slideDownIn{0%{opacity:0;transform:translateY(-18px)}100%{opacity:1;transform:translateY(0)}}@-moz-keyframes elastic{0%{transform:scale(0)}100%,55%{transform:scale(1)}70%{transform:scale(.98)}}@-webkit-keyframes elastic{0%{transform:scale(0)}100%,55%{transform:scale(1)}70%{transform:scale(.98)}}@-o-keyframes elastic{0%{transform:scale(0)}100%,55%{transform:scale(1)}70%{transform:scale(.98)}}@keyframes elastic{0%{transform:scale(0)}100%,55%{transform:scale(1)}70%{transform:scale(.98)}}:root{--grey-0:#fff;--grey-1:#fdfdfd;--grey-2:#f7f7f7;--grey-3:#eff2f3;--grey-4:#ccc;--grey-5:#999;--grey-6:#666;--grey-7:#333;--grey-8:#222;--grey-9:#000;--grey-1-a0:rgba(253,253,253,0);--grey-1-a7:rgba(253,253,253,0.7);--grey-1-a5:rgba(253,253,253,0.5);--grey-1-a3:rgba(253,253,253,0.3);--grey-9-a1:rgba(0,0,0,0.1);--grey-9-a5:rgba(0,0,0,0.5);--grey-2-a0:rgba(247,247,247,0);--color-pink-light:#ffe6fa;--color-cyan-light:#e3fdf5;--color-red:#e9546b;--color-pink:#ed6ea0;--color-orange:#ec8c69;--color-yellow:#eab700;--color-green:#0a7426;--color-aqua:#3e999f;--color-blue:#38a1db;--color-purple:#9d5b8b;--color-grey:#869194;--color-red-a1:rgba(233,84,107,0.1);--color-red-a3:rgba(233,84,107,0.3);--color-pink-a3:rgba(237,110,160,0.3);--color-pink-light-a3:rgba(255,230,250,0.3);--color-pink-light-a5:rgba(255,230,250,0.5);--color-pink-light-a7:rgba(255,230,250,0.7);--body-bg-shadow:var(--grey-2);--box-bg-shadow:var(--grey-9-a1);--text-color:var(--grey-7);--header-text-color:var(--grey-0);--primary-color:var(--color-red);--nav-bg:linear-gradient(-225deg,var(--color-cyan-light) 0,var(--color-pink-light) 100%)}.primary{--note-border:#cda0c7;--note-bg:#fdf8ff;--note-text:#8a51c0;--note-hover:#935aca}.info{--note-border:#8fa4dc;--note-bg:#f1f9ff;--note-text:#1d4974;--note-hover:#1d5fa0}.success{--note-border:#a3c293;--note-bg:#fcfff5;--note-text:#2c662d;--note-hover:#3b883c}.warning{--note-border:#c9ba9b;--note-bg:#fffbeb;--note-text:#947600;--note-hover:#ccb045}.danger{--note-border:#f4b3c1;--note-bg:#fff2f5;--note-text:#cc0f35;--note-hover:#f14668}[data-theme=dark]:root{--grey-0:#222;--grey-1:#21252b;--grey-2:#363636;--grey-3:#444;--grey-4:#666;--grey-5:#aaa;--grey-6:#ccc;--grey-7:#ddd;--grey-8:#eee;--grey-9:#f7f7f7;--grey-1-a7:rgba(34,34,34,0.7);--grey-1-a5:rgba(34,34,34,0.5);--grey-1-a3:rgba(34,34,34,0.3);--grey-1-a0:rgba(34,34,34,0);--grey-9-a1:rgba(51,51,51,0.1);--grey-2-a0:rgba(54,54,54,0);--color-pink-light:#322d31;--color-cyan-light:#2d3230;--color-red:rgba(237,118,137,0.9);--color-pink:rgba(241,139,179,0.8);--color-orange:rgba(240,163,135,0.8);--color-yellow:#ffe175;--color-green:#86c59d;--color-aqua:#97d3d6;--color-blue:#9cd0ed;--color-purple:#cfacc5;--color-grey:#c3c8ca;--body-bg-shadow:#000;--box-bg-shadow:#000;--text-color:var(--grey-5);--header-text-color:var(--grey-9)}[data-theme=dark] .primary{--note-border:rgba(123,96,119,0.8);--note-bg:rgba(50,49,50,0.8);--note-text:rgba(161,116,205,0.8);--note-hover:rgba(117,72,161,0.8)}[data-theme=dark] .info{--note-border:rgba(85,98,132,0.8);--note-bg:rgba(48,49,50,0.8);--note-text:rgba(109,164,219,0.8);--note-hover:rgba(39,127,214,0.8)}[data-theme=dark] .success{--note-border:rgba(97,116,88,0.8);--note-bg:rgba(50,50,48,0.8);--note-text:rgba(128,200,129,0.8);--note-hover:rgba(41,95,42,0.8)}[data-theme=dark] .warning{--note-border:rgba(120,111,93,0.8);--note-bg:rgba(50,50,46,0.8);--note-text:rgba(220,176,0,0.8);--note-hover:rgba(163,140,55,0.8)}[data-theme=dark] .danger{--note-border:rgba(146,107,115,0.8);--note-bg:rgba(50,48,48,0.8);--note-text:rgba(239,38,79,0.8);--note-hover:rgba(168,49,72,0.8)}[data-theme=dark] .index.wrap .card .message .btn,[data-theme=dark] .overview .menu .item,[data-theme=dark] .sidebar .tab li,[data-theme=dark] [data-background-image],[data-theme=dark] img{opacity:.75}[data-theme=dark] .index.wrap .card .message .btn:hover,[data-theme=dark] .overview .menu .item:hover,[data-theme=dark] .sidebar .tab li:hover,[data-theme=dark] [data-background-image]:hover,[data-theme=dark] img:hover{opacity:.9}[data-theme=dark] #imgs::before{background-color:rgba(0,0,0,.5)}span.aqua,span.blue,span.green,span.grey,span.orange,span.pink,span.purple,span.red,span.yellow{background:0 0!important}span.red{color:var(--color-red)}span.pink{color:var(--color-pink)}span.orange{color:var(--color-orange)}span.yellow{color:var(--color-yellow)}span.green{color:var(--color-green)}span.aqua{color:var(--color-aqua)}span.blue{color:var(--color-blue)}span.purple{color:var(--color-purple)}span.grey{color:var(--color-grey)}.links:last-child,.tabs:last-child,blockquote:last-child,img:last-child,ol:last-child,p:last-child,pre:last-child,table:last-child,ul:last-child{margin-bottom:0}h1,h2,h3,h4,h5,h6{position:relative;padding-top:.625rem}h1:hover .anchor::after,h1:hover .anchor::before,h2:hover .anchor::after,h2:hover .anchor::before,h3:hover .anchor::after,h3:hover .anchor::before,h4:hover .anchor::after,h4:hover .anchor::before,h5:hover .anchor::after,h5:hover .anchor::before,h6:hover .anchor::after,h6:hover .anchor::before{color:var(--primary-color)}.anchor{border-bottom-style:none;color:var(--grey-4);float:right;margin-left:.625rem}.anchor:hover{color:inherit}.anchor::after,.anchor::before{color:var(--grey-4);position:absolute;font-weight:400}.active .anchor::after,.active .anchor::before{color:var(--primary-color)}p{margin:0 0 .8rem}blockquote{font-size:90%;background-color:var(--grey-2);margin:1.25rem 0;border-radius:.1875rem}blockquote ul{margin:.625rem 0!important}blockquote ul li::before{width:.375rem!important;height:.375rem!important;top:.6875rem!important}blockquote p{margin:0!important}.video-container,iframe{margin-bottom:1.25rem}.image-info{display:block;text-align:center;font-size:$font-size-smaller;color:var(--grey-4)}#artDetail dl dt::marker,#artDetail ul li.task-list-item input[type=checkbox],#artDetail ul>li::marker{display:none}.video-container{height:0;overflow:hidden;padding-top:75%;position:relative;width:100%}.video-container embed,.video-container iframe,.video-container object{height:100%;left:0;margin:0;position:absolute;top:0;width:100%}.kbd,kbd{background-color:var(--grey-1);background-image:linear-gradient(var(--grey-2),var(--grey-0),var(--grey-2));border:.0625rem solid var(--grey-4);border-radius:.2rem;box-shadow:.1rem .1rem .2rem var(--grey-9-a1);font-family:inherit;padding:.1rem .3rem;white-space:nowrap}mark{background-color:#dbfdad}ins{--line-color:var(--note-hover,var(--primary-color));text-decoration:none;border-bottom:.125rem solid var(--line-color)}ins.wavy{text-decoration-style:wavy;text-decoration-line:underline;text-decoration-color:var(--line-color);border-bottom:none}ins.dot{border-bottom:.2rem dotted var(--line-color)}s{color:var(--grey-5);text-decoration-color:var(--note-hover,var(--grey-5))}ruby{padding:0 .3125rem}.katex-display{overflow-x:scroll;overflow-y:hidden}.spoiler:not(.bulr){background-color:var(--text-color);color:var(--text-color);text-shadow:none;transition:color .3s;padding:0 .1875rem}.spoiler:not(.bulr):hover{color:#fff}.bulr,.rainbow{color:transparent}.bulr{text-shadow:rgba(0,0,0,.7) 0 0 .625rem}.rainbow{background-image:linear-gradient(to left,#ff4500,orange,gold,#90ee90,#0ff,#1e90ff,#9370db,#ff69b4,#ff4500);background-size:110vw;background-clip:text;animation:rainbow 60s linear infinite}.anchor::after,.anchor::before{content:'H';font-family:$font-family-posts;left:-1.875rem;top:1rem;width:1.25rem;height:1.5625rem;text-align:right;visibility:visible;font-size:80%mobile-small()}.anchor::after{font-size:50%;left:-1.375rem;line-height:3mobile-small()}h1 .anchor::after{content:" 1 "}h2 .anchor::after{content:" 2 "}h3 .anchor::after{content:" 3 "}h4 .anchor::after{content:" 4 "}h5 .anchor::after{content:" 5 "}h6 .anchor::after{content:" 6 "}@-moz-keyframes rainbow{to{background-position:-2000vw}}@-webkit-keyframes rainbow{to{background-position:-2000vw}}@-o-keyframes rainbow{to{background-position:-2000vw}}@keyframes rainbow{to{background-position:-2000vw}}#artDetail li{position:relative;margin:.2rem 0}#artDetail li p{margin:0 0 .5em}#artDetail .options .right{float:unset!important}#artDetail dl,#artDetail ol,#artDetail ul{margin:0 0 .8em;padding:.1em .2em .1em 1.4em}#artDetail dl dt,#artDetail ul>li{left:-1em;list-style-type:none}#artDetail dl dt::before,#artDetail ul>li::before{content:"";background:0 0!important}#artDetail dl dt.ruby::before,#artDetail ul>li.ruby::before{top:1.25em}#artDetail dl dt:hover::before,#artDetail ul>li:hover::before{background:var(--color-pink)}#artDetail ol:not([start]){counter-reset:counter}#artDetail ol>li::before{counter-increment:counter;content:counter(counter);position:absolute;width:1.4em;height:1.4em;border-radius:50%;text-align:center;font-size:.8em;line-height:1.4;top:.5em;left:-1.8em;background:var(--primary-color);color:var(--grey-1);cursor:pointer}#artDetail ol>li.ruby::before{top:.3em}#artDetail ol>li:hover::before{color:var(--grey-1);background:var(--color-pink)}#artDetail dl dt{position:relative}#artDetail dl dd{padding-left:.9375em}#artDetail ul li.task-list-item input[type=checkbox]+label::before{color:var(--grey-4);display:inline-block;margin-right:.625em}#artDetail ul li.task-list-item input[type=checkbox]:checked+label::before{color:var(--note-text,var(--primary-color))}#artDetail li ul>li::before{background:var(--grey-1)}#artDetail li ol>li::before{content:counter(counter) ".";background:0 0;color:var(--primary-color);font-size:1em;line-height:1}#artDetail li ol>li:hover::before{background:0 0;color:var(--color-pink)}#artDetail ol>li.quiz.show.true::before,#artDetail ol>li.quiz>ul.options li.right::before{color:var(--color-green)!important}#artDetail ol>li.quiz.show.true::after,#artDetail ol>li.quiz>ul.options li.right::after{color:var(--color-green)!important;animation:fadeIn .5s!important}#artDetail ol>li.quiz.show.false::before,#artDetail ol>li.quiz>ul.options li.wrong::before{color:var(--color-red)!important}#artDetail ol>li.quiz.show.false::after,#artDetail ol>li.quiz>ul.options li.wrong::after{color:var(--color-red)!important;animation:fadeIn .5s!important}#artDetail ol>li.quiz{margin:.625rem 0!important}#artDetail ol>li.quiz::before{display:none}#artDetail ol>li.quiz.ruby::before{top:.5rem}#artDetail ol>li.quiz>p{margin:0;cursor:pointer}#artDetail ol>li.quiz>p:first-child::before{content:'[' attr(data-type) ']';font-size:$font-size-smallest;color:var(--grey-4);margin:auto .3125rem}#artDetail ol>li.quiz .gap{display:inline-block;min-width:2.5rem;text-align:center;padding:0 .625rem;text-indent:-624.9375rem}#artDetail ol>li.quiz .gap::after{display:block;content:'';background:var(--text-color);width:calc(100% + 1.25rem);height:.0625rem;margin-bottom:-.0625rem;margin-left:-.625rem}#artDetail ol>li.quiz.show.fill .gap{text-indent:0}#artDetail ol>li.quiz blockquote{display:none}#artDetail ol>li.quiz blockquote .mistake{display:block;border:.1875rem dashed var(--grey-4);padding:.625rem 1.25rem;background:var(--grey-3);margin:.3125rem}#artDetail ol>li.quiz blockquote .mistake::before{display:block;content:'[' attr(data-type) ']';font-size:$font-size-smaller;color:var(--grey-4)}#artDetail ol>li.quiz .note{display:none;padding:0;margin:0;background:0 0;border:none;border-radius:inherit;color:unset;font-size:inherit;filter:unset}#artDetail ol>li.quiz.show .note,#artDetail ol>li.quiz.show blockquote{display:block}#artDetail ol>li.quiz ul.options{padding-inline-start:.625rem}#artDetail ol>li.quiz ul.options li::before{color:var(--color-grey);margin-right:.625rem}#artDetail ol>li.quiz ul.options li:nth-child(1)::before{content:'A.'}#artDetail ol>li.quiz ul.options li:nth-child(2)::before{content:'B.'}#artDetail ol>li.quiz ul.options li:nth-child(3)::before{content:'C.'}#artDetail ol>li.quiz ul.options li:nth-child(4)::before{content:'D.'}#artDetail ol>li.quiz ul.options li:nth-child(5)::before{content:'E.'}#artDetail ol>li.quiz ul.options li:nth-child(6)::before{content:'F.'}#artDetail ol>li.quiz ul.options li:nth-child(7)::before{content:'G.'}#artDetail ol>li.quiz ul.options li:nth-child(8)::before{content:'H.'}#artDetail ol>li.quiz ul.options li:nth-child(9)::before{content:'I.'}#artDetail ol>li.quiz ul.options li:nth-child(10)::before{content:'J.'}#artDetail ol>li.quiz ul.options li:nth-child(11)::before{content:'K.'}#artDetail ol>li.quiz ul.options li:nth-child(12)::before{content:'L.'}#artDetail ol>li.quiz ul.options li:nth-child(13)::before{content:'M.'}#artDetail ol>li.quiz ul.options li:nth-child(14)::before{content:'N.'}#artDetail ol>li.quiz ul.options li:nth-child(15)::before{content:'O.'}#artDetail ol>li.quiz ul.options li:nth-child(16)::before{content:'P.'}#artDetail ol>li.quiz ul.options li:nth-child(17)::before{content:'Q.'}#artDetail ol>li.quiz ul.options li:nth-child(18)::before{content:'R.'}#artDetail ol>li.quiz ul.options li:nth-child(19)::before{content:'S.'}#artDetail ol>li.quiz ul.options li:nth-child(20)::before{content:'T.'}#artDetail ol>li.quiz ul.options li:nth-child(21)::before{content:'U.'}#artDetail ol>li.quiz ul.options li:nth-child(22)::before{content:'V.'}#artDetail ol>li.quiz ul.options li:nth-child(23)::before{content:'W.'}#artDetail ol>li.quiz ul.options li:nth-child(24)::before{content:'X.'}#artDetail ol>li.quiz ul.options li:nth-child(25)::before{content:'Y.'}#artDetail ol>li.quiz ul.options li:nth-child(26)::before{content:'Z.'}#artDetail ol>li.quiz>ul.options li{cursor:pointer}#artDetail ol>li.quiz>ul.options li::after{position:absolute;left:-1.5625rem;top:0}#artDetail ol>li.quiz.show.false::before,#artDetail ol>li.quiz.show.true::before{visibility:hidden}#artDetail ol>li.quiz.show.false::after,#artDetail ol>li.quiz.show.true::after{position:absolute;left:-1.2rem;top:.25rem}.links{display:flex;flex-wrap:wrap;font-size:.9remmobile()}.links .item{position:relative;display:inline-flex;justify-self:center;align-items:center;line-height:1.5;width:calc(50% - 2rem);padding:.5rem 1rem;margin:1rem;--bg-color:var(--block-color,#666)}.links .item .image{display:block;width:4rem;height:4rem;border-radius:.9375rem;background:center no-repeat var(--grey-1);background-size:contain;flex-shrink:0;border:none}.links .item .info{padding-left:1rem}.links .item .title{margin:.5rem 0;font-family:$font-family-title;font-weight:700;color:var(--bg-color);border:none}.links .item:hover,.links .item:hover .title{color:var(--header-text-color)}.links .item .title .ic{display:none}.links .item .desc{font-size:$font-size-smallest;margin:.5rem 0}.links .item:hover{background-color:var(--bg-color);box-shadow:0 .125rem 1.25rem var(--bg-color);border-color:var(--bg-color)}.links .item:hover .image{mix-blend-mode:normal;background-color:var(--bg-color)}#artDetail .note{border-radius:.1875rem;margin:1rem 0;padding:1rem 1rem 1rem 2.5rem;position:relative;background:var(--note-bg,var(--grey-2));color:var(--grey-6);border-left:.25rem solid var(--note-border,var(--grey-4));font-size:$font-size-small;--primary-color:var(--note-text)}details summary,details[open]{background:var(--note-bg,none);border-radius:.25rem}#artDetail .note::before{position:absolute;left:.5rem;top:calc(50% - 1.5rem);font-size:1.5rem;color:var(--note-text,var(--grey-6))}.audio .cover,.audio .preview .lrc,.media-container,.player-info .volume,.player-info ol,.player-info ol>li.current,.player-info ol>li::before,.tabs,.tabs .nav li{position:relative}#artDetail .note.no-icon{padding-left:1rem}details summary,details>div{padding:.625rem}#artDetail .note.no-icon::before{content:none}::-webkit-details-marker{display:none}details>summary:first-of-type{list-style-type:none}details summary{outline:0;cursor:pointer;transition:all .4s ease}details summary::before{color:var(--grey-4);margin-right:.5rem}details.danger,details.info,details.primary,details.success,details.warning,details[open]>div{margin:0 0 .8rem}details.danger summary,details.danger summary::before,details.info summary,details.info summary::before,details.primary summary,details.primary summary::before,details.success summary,details.success summary::before,details.warning summary,details.warning summary::before{color:var(--note-text)}details[open]{color:var(--grey-6)}details[open] summary{background:var(--note-hover,var(--grey-2));border-radius:.25rem}details[open] summary::before{color:var(--primary-color)}details[open].danger,details[open].info,details[open].primary,details[open].success,details[open].warning{color:var(--note-text)}details[open].danger>summary,details[open].info>summary,details[open].primary>summary,details[open].success>summary,details[open].warning>summary{color:#fff;border-radius:.25rem .25rem 0 0}details[open].danger>summary::before,details[open].info>summary::before,details[open].primary>summary::before,details[open].success>summary::before,details[open].warning>summary::before{color:#fff}span.label{display:inline;border-radius:.3rem;border:.0625rem solid;padding:.2rem .3rem;font-family:$font-family-monospace;font-size:$font-size-medium;background:var(--note-bg,var(--grey-2));border-color:var(--note-border,var(--grey-4));color:var(--note-text,var(--grey-6))}.tabs{display:block}.tabs .nav{overflow:hidden;border-bottom:.0625rem solid var(--grey-1-a7);height:2.6875rem}.tabs .nav ul{display:flex;padding:0;white-space:nowrap;overflow-x:auto}.tabs .nav li{cursor:pointer;border:none;display:inline-block;padding:.3125rem 1.25rem;margin:0}.tabs .nav li::before{content:"";position:absolute;left:50%;right:50%;top:auto;bottom:0;transition:all .2s ease-in-out;width:auto;height:auto;background:0 0;border-radius:0;border-bottom:.125rem solid transparent}.tabs .nav li.active::before{left:0;right:0;border-bottom-color:var(--note-hover,var(--primary-color))}.tabs .tab{display:none}.tabs .tab.active{display:block}.tabs .show-btn{position:absolute;cursor:pointer;right:0;bottom:0;width:2.875rem;height:2.875rem;text-align:center;color:var(--grey-4);z-index:$zindex-1}#artDetail .tabs{margin:0 0 2rem}#artDetail .tabs .tab{padding:1.25rem}#artDetail .note h2,#artDetail .note h3,#artDetail .note h4,#artDetail .note h5,#artDetail .note h6,#artDetail details h2,#artDetail details h3,#artDetail details h4,#artDetail details h5,#artDetail details h6{margin-top:.1875rem;border-bottom:initial;margin-bottom:0;padding-top:0}#artDetail .note p,#artDetail details p{line-height:1.8}#artDetail .note a:not(.btn),#artDetail details a:not(.btn){color:var(--note-hover);border-bottom:.0625rem dashed var(--note-text)}#artDetail .note a:not(.btn):hover,#artDetail details a:not(.btn):hover{color:var(--note-text);border-bottom-color:var(--note-text)}#artDetail .note ul li::before,#artDetail details ul li::before{background:var(--note-text)}#artDetail .note ol li:before,#artDetail details ol li:before{background:var(--note-text)!important;width:.8rem;height:.8rem;font-size:.45rem;line-height:.8rem;top:.4rem;left:-1.2rem}.media-container{overflow:hidden;margin-bottom:2rem}.player-info{color:var(--text-color);font-size:$font-size-base;min-width:16.25rem}.player-info .tabs{border:none;box-shadow:none}.player-info .tabs .show-btn{display:none}.player-info .tabs .tab{padding:0}.player-info .controller{cursor:pointer;font-size:$font-size-larger;display:flex;justify-content:space-around;align-items:center;text-align:center}.player-info .controller .btn{color:var(--grey-6);width:18%}.player-info .controller .btn:hover{color:var(--color-pink)}.player-info .play-pause{font-size:130%}.player-info .volume .bar{position:absolute;height:.25rem;background:var(--color-pink-a3);bottom:0;left:0}.player-info .volume.off .bar{height:0}.player-info .playlist{border-top:.125rem solid var(--grey-9-a1)}.player-info ol{font-size:$font-size-smaller;padding:.3125rem 0;margin:.625rem 0 0;height:12.5rem;overflow-x:scroll;counter-reset:counter}.player-info ol::-webkit-scrollbar{width:.1875rem;height:.1875rem}.player-info ol>li{display:flex;padding:.3125rem .9375rem .3125rem 1.5625rem;cursor:pointer;height:2rem;overflow:hidden}.player-info ol>li.error{opacity:.5;text-decoration-line:line-through}.player-info ol>li::before{height:auto;background:0 0!important;border:none!important;top:0!important;left:0!important;font-size:inherit;line-height:inherit;margin-left:-1.25rem;width:1.875rem;counter-increment:counter;content:counter(counter);text-align:right;padding-right:.3125rem;color:var(--grey-5)}.audio .preview .info span,.audio .preview .lrc{font-size:$font-size-smallest}.player-info ol>li .info{display:block;width:100%}.player-info ol>li .info span:nth-child(2){float:right;margin-left:.625rem;color:var(--grey-5)}.player-info ol>li.current{color:var(--primary-color)}.player-info ol>li.current::before{color:currentColor}.player-info ol>li.current .progress .bar{position:absolute;height:100%;background:var(--color-pink-a3);top:0;left:0}.player-info ol>li.current .progress::before{content:attr(data-ptime) " / " attr(data-dtime);color:var(--grey-5);position:absolute;right:0;padding:0 .3rem}.player-info ol>li.current .progress.seeking::before{color:currentColor}.player-info ol>li.current .info{padding-right:5rem;user-select:none}.player-info ol>li.current .info span:nth-child(2){display:none}.player-info ol>li:hover{background-color:var(--grey-1-a7)}.player-info ol>li:hover::before{color:var(--primary-color)}.video{border-radius:0 0 .5rem .5rem}.audio .preview{display:flex;align-items:center;padding:1.25rem 1.25rem 0mobile()}.audio .preview .info{display:flex;flex-direction:column;margin-left:.625rem;padding:.625rem;text-overflow:ellipsis;overflow:hidden;width:100%mobile()}.audio .preview .info h4{margin:0;text-overflow:ellipsis;max-height:3rem;padding:0;overflow:hidden}.audio .preview .lrc{max-height:4rem;margin-top:.3125rem;text-align:center;overflow:hidden}.audio .preview .lrc .inner{width:100%;transition:all .5s ease-out}.audio .preview .lrc p{font-size:.75rem;color:var(--grey-6);line-height:1rem!important;height:1rem!important;padding:0!important;margin:0!important;transition:all .5s ease-out;opacity:.3;overflow:hidden}.audio .preview .lrc p.current{opacity:1;overflow:visible;height:auto!important;min-height:1rem}.audio .cover{flex-shrink:0;cursor:pointer}.audio .cover .disc::after,.audio .cover::before{content:"";position:absolute}.audio .cover::before{z-index:1;background:url(../images/play_needle.png) center/contain no-repeat;width:3.4375rem;height:5.1875rem;top:-1.5625rem;left:-1.5625rem;transform:rotateZ(-60deg);animation:rotate-needle-pause .5s 1 normal linear forwards;transform-origin:.625rem .625rem}.audio .cover .disc{animation:rotate 20s linear infinite;animation-play-state:paused;padding:1.5rem;max-height:144px}.audio .cover .disc::after{background:url(../images/play_disc.png) center/contain no-repeat;z-index:1;width:100%;height:100%;top:0;left:0}.audio .cover img{object-fit:contain;width:6rem;height:6rem;border-radius:50%}.audio.playing .cover::before{animation:rotate-needle-resume .5s 1 normal linear forwards}.audio.playing .cover .disc{animation-play-state:running}</style><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/themes/prism-tomorrow.min.css><style>pre{padding:2rem 1rem 1rem 1rem!important;border-radius:.35rem;tab-size:4}.code-area::after{content:" ";position:absolute;border-radius:50%;background:#ff5f56;width:12px;height:12px;top:0;left:12px;margin-top:12px;-webkit-box-shadow:20px 0 #ffbd2e,40px 0 #27c93f;box-shadow:20px 0 #ffbd2e,40px 0 #27c93f}code{padding:1px 5px;top:13px!important;font-family:Inconsolata,Monaco,Consolas,"Courier New",Courier,monospace;font-size:.91rem;color:#e96900;background-color:#f8f8f8;border-radius:2px}.code_copy{position:absolute;top:.7rem;right:25px;z-index:1;filter:invert(50%);cursor:pointer}.codecopy_notice{position:absolute;top:.7rem;right:6px;z-index:1;filter:invert(50%);opacity:0}.code_lang{position:absolute;top:1.2rem;right:46px;line-height:0;font-weight:700;font-family:Consolas,Monaco,"Andale Mono","Ubuntu Mono",monospace;z-index:1;filter:invert(50%);cursor:pointer}.code-expand{position:absolute;top:4px;right:0;filter:invert(50%);padding:7px;z-index:999!important;cursor:pointer;transition:all .3s;transform:rotate(0)}.code-closed .code-expand{transform:rotate(-180deg)!important;transition:all .3s}.code-closed pre::before{height:0}pre code{padding:0;color:#e8eaf6;background-color:#272822}</style><script src=https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.min.js></script><meta name=generator content="Hexo 5.4.0"></head><body><script>const LOCAL={quiz:{choice:"单选题",multiple:"多选题",true_false:"判断题",essay:"问答题",gap_fill:"填空题",mistake:"错题备注"}};</script><nav id=header-navbar class="navbar is-fixed-top is-link" role=navigation aria-label="main navigation"><div class=navbar-brand><a class=navbar-item href="/"><img src=/logo.png alt="Timeliar's Blog" height=28 class=mr-2> <b>Timeliar's Blog</b></a> <a role=button class=navbar-burger aria-label=menu aria-expanded=false data-target=navbarBasicExample><span aria-hidden=true></span> <span aria-hidden=true></span> <span aria-hidden=true></span></a></div><div id=navbarBasicExample class=navbar-menu><div class=navbar-start><a class=navbar-item href=/archives>归档</a> <a class=navbar-item href=/friends>友情链接</a></div><div class=navbar-end><a class=navbar-item href=javascript:void(0)><i class="fas fa-search"></i></a> <a class=navbar-item href=javascript:void(0)><i class="fas fa-comment"></i></a></div></div></nav><script>$(".navbar-burger").click(function(){$(".navbar-burger").toggleClass("is-active"),$(".navbar-menu").toggleClass("is-active")});</script><main class="container mt-4"><div class="columns is-flex-direction-row"><div class="column is-three-quarters is-justify-content-center"><div class=card id=post-main-content><header class=card-header><p class="is-size-3 card-header-title">关于匿名内部类的坑</p></header><div class=card-neck><div>发布于：<time>2017-03-13 22:28:26</time></div><div><a href="/tags/java/" class="tag is-info icon-text"><span class="icon mr-1"><i class="fas fa-tag"></i></span> Java</a></div></div><div class=card-content id=artDetail><div class=content><h1>起因</h1><p>有一种初始化方法，写起来很爽，比如这样：</p><pre class="line-numbers language-java" data-language=java><code class=language-java><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">></span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
  <span class="token punctuation">&#123;</span>
    <span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span><span class="token string">"timeliar"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span><span class="token string">"timeliar"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden=true class=line-numbers-rows><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><span id=more></span><p><strong>这种写法千万注意，会造成内存泄露，原因以下再说</strong></p><p>然而这种写法有坑，坑来自 Java 基础的不扎实。<br>原本天真的以为，这种写法是直接初始化一个类，然后直接调用对象的方法。<br>但是用反射提取字段信息的时候，出现了问题</p><pre class="line-numbers language-java" data-language=java><code class=language-java><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testInner</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IllegalAccessException</span> <span class="token punctuation">&#123;</span>
    <span class="token class-name">BarUserLink</span> link <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BarUserLink</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token punctuation">&#123;</span>
            <span class="token function">setBarId</span><span class="token punctuation">(</span><span class="token number">1L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">setUserId</span><span class="token punctuation">(</span><span class="token number">1L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
    <span class="token class-name">BarUserLink</span> link1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BarUserLink</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    link<span class="token punctuation">.</span><span class="token function">setBarId</span><span class="token punctuation">(</span><span class="token number">1L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    link<span class="token punctuation">.</span><span class="token function">setUserId</span><span class="token punctuation">(</span><span class="token number">1L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"匿名内部类反射取字段"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Field</span><span class="token punctuation">[</span><span class="token punctuation">]</span> fields <span class="token operator">=</span> link<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDeclaredFields</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Field</span> field <span class="token operator">:</span> fields<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        field<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>field<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" ==> "</span> <span class="token operator">+</span> field<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>link<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"正常new对象反射取字段"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    fields <span class="token operator">=</span> link1<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDeclaredFields</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Field</span> field <span class="token operator">:</span> fields<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        field<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>field<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" ==> "</span> <span class="token operator">+</span> field<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>link<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden=true class=line-numbers-rows><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>输出：</p><pre class="line-numbers language-none"><code class=language-none>匿名内部类反射取字段
this$0 &#x3D;&#x3D;&gt; date.timeliar.graduation.web.TestQuickInit@27abe2cd
正常new对象反射取字段
barId &#x3D;&#x3D;&gt; 1
userId &#x3D;&#x3D;&gt; 1<span aria-hidden=true class=line-numbers-rows><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1>解释</h1><p>查阅了相关资料 (主要是 Google) 之后，尝试得出一个结论，这种写法返回的其实是一个继承了该类的匿名内部类，<br>实验检验：</p><pre class="line-numbers language-java" data-language=java><code class=language-java><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">innerClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token class-name">BarUserLink</span> link <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BarUserLink</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token punctuation">&#123;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"this -> "</span><span class="token operator">+</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"super -> "</span><span class="token operator">+</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getSuperclass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden=true class=line-numbers-rows><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>输出：</p><pre class="line-numbers language-java" data-language=java><code class=language-java><span class="token keyword">this</span> <span class="token operator">-></span> <span class="token keyword">class</span> <span class="token class-name"><span class="token namespace">date<span class="token punctuation">.</span>timeliar<span class="token punctuation">.</span>graduation<span class="token punctuation">.</span>web<span class="token punctuation">.</span></span>TestQuickInit</span>$<span class="token number">4</span>
<span class="token keyword">super</span> <span class="token operator">-></span> <span class="token keyword">class</span> <span class="token class-name"><span class="token namespace">date<span class="token punctuation">.</span>timeliar<span class="token punctuation">.</span>graduation<span class="token punctuation">.</span>web<span class="token punctuation">.</span>model<span class="token punctuation">.</span>po<span class="token punctuation">.</span></span>BarUserLink</span><span aria-hidden=true class=line-numbers-rows><span></span><span></span></span></code></pre><p>真相大白，初始化的时候两个大括号的意义也明了了，外部括号是定义了类边界，内部的是普通代码块，作为作用域。</p><p><strong>因为是内部类，所以返回出对象之后，如果该对象被一直使用，那么外部类的对象将不会被会回收，这就造成了内存泄露</strong><br><strong>返回的本质是一个继承了所需要类的内部类，虽然是子类，但是并不能代表父类的一切，比如反射取字段的时候</strong></p></div></div><footer class="card-footer is-justify-content-flex-end"><button class="button is-white has-text-grey"><time>2017-03-13</time></button></footer></div><link rel=stylesheet href=https://cdn.bootcdn.net/ajax/libs/viewerjs/1.7.1/viewer.min.css><script src=https://cdn.bootcdn.net/ajax/libs/viewerjs/1.7.1/viewer.min.js></script><script>function scrollAnimate(t){$("html, body").animate({scrollTop:t-10},300)}$(function(){const t=$(".navbar").height();t&&$(".navbar").hasClass("is-fixed-top")||(t=0);var o=window.location.hash.substr(1);if(o){let n=$("#"+decodeURIComponent(o));n.length&&scrollAnimate(n.offset().top-t)}$(".menu-list-link").click(function(o){o.preventDefault(),scrollAnimate($(decodeURIComponent($(this).html())).offset().top-t)})});</script><script>const $d=function(t,e){return e=e||document,0===t.indexOf("#")?e.getElementById(t.replace("#","")):e.querySelector(t)};$d.all=function(t,e){return(e=e||document).querySelectorAll(t)},$d.each=function(t,e,n){return $d.all(t,n).forEach(e)},Object.assign(HTMLElement.prototype,{createChild:function(t,e,n){var i=document.createElement(t);switch(Object.assign(i,e),n){case"after":this.insertAfter(i);break;case"replace":this.innerHTML="";default:this.appendChild(i)}return i},wrap:function(t){var e=document.createElement("div");Object.assign(e,t),this.parentNode.insertBefore(e,this),this.parentNode.removeChild(this),e.appendChild(this)},height:function(t){return t&&(this.style.height="number"==typeof t?t+"rem":t),this.getBoundingClientRect().height},width:function(t){return t&&(this.style.width="number"==typeof t?t+"rem":t),this.getBoundingClientRect().width},top:function(){return this.getBoundingClientRect().top},left:function(){return this.getBoundingClientRect().left},attr:function(t,e){return null===e?this.removeAttribute(t):e?(this.setAttribute(t,e),this):this.getAttribute(t)},insertAfter:function(t){var e=this.parentNode;e.lastChild==this?e.appendChild(t):e.insertBefore(t,this.nextSibling)},display:function(t){return null==t?this.style.display:(this.style.display=t,this)},child:function(t){return $d(t,this)},find:function(t){return $d.all(t,this)},_class:function(t,e,n){e=e.indexOf(" ")?e.split(" "):[e];var i=this;e.forEach(function(e){"toggle"==t?i.classList.toggle(e,n):i.classList[t](e)})},addClass:function(t){return this._class("add",t),this},removeClass:function(t){return this._class("remove",t),this},toggleClass:function(t,e){return this._class("toggle",t,e),this},hasClass:function(t){return this.classList.contains(t)}});</script><script>const postBeauty=function(){$d.each("li ruby",function(e){var a=e.parentNode;(a="LI"!=e.parentNode.tagName?e.parentNode.parentNode:a).addClass("ruby")}),$d.each("#artDetail table",function(e){e.wrap({className:"table-container"})}),$d.each(".highlight > .table-container",function(e){e.className="code-container"}),$d.each("figure.highlight",function(e){var a=e.child(".code-container"),i=e.child("figcaption");function n(){e.removeClass("fullscreen"),e.scrollTop=0,BODY.removeClass("fullscreen"),l.child(".ic").className="ic i-expand"}e.insertAdjacentHTML("beforeend",'<div class="operation"><span class="breakline-btn"><i class="ic i-align-left"></i></span><span class="copy-btn"><i class="ic i-clipboard"></i></span><span class="fullscreen-btn"><i class="ic i-expand"></i></span></div>'),(r=e.child(".copy-btn")).addEventListener("click",function(e){var i=e.currentTarget,n="",s="";a.find("pre").forEach(function(e){s+=n+e.innerText,n="\n"}),clipBoard(s,function(e){i.child(".ic").className=e?"ic i-check":"ic i-times",i.blur(),showtip(LOCAL.copyright)})}),r.addEventListener("mouseleave",function(e){setTimeout(function(){e.target.child(".ic").className="ic i-clipboard"},1e3)}),e.child(".breakline-btn").addEventListener("click",function(a){a=a.currentTarget,e.hasClass("breakline")?(e.removeClass("breakline"),a.child(".ic").className="ic i-align-left"):(e.addClass("breakline"),a.child(".ic").className="ic i-align-justify")});var s,t,c,l=e.child(".fullscreen-btn"),r=function(a){a.currentTarget,e.hasClass("fullscreen")?(n(),c&&c(),pageScroll(e)):(e.addClass("fullscreen"),BODY.addClass("fullscreen"),l.child(".ic").className="ic i-compress",t&&t())};l.addEventListener("click",r),i&&i.addEventListener("click",r),a&&300<a.height()&&(a.style.maxHeight="300px",a.insertAdjacentHTML("beforeend",'<div class="show-btn"><i class="ic i-angle-down"></i></div>'),(s=a.child(".show-btn")).child("i"),t=function(){a.style.maxHeight="",s.addClass("open")},c=function(){a.style.maxHeight="300px",s.removeClass("open")},s.addEventListener("click",function(e){s.hasClass("open")?(n(),c(),pageScroll(a)):t()}))}),$d.each("pre.mermaid > svg",function(e){e.style.maxWidth=""}),$d.each(".reward button",function(e){e.addEventListener("click",function(e){e.preventDefault();var a=$d("#qr");"inline-flex"===a.display()?transition(a,0):transition(a,1,function(){a.display("inline-flex")})})}),$d.each(".quiz > ul.options li",function(e){e.addEventListener("click",function(a){e.hasClass("correct")?(e.toggleClass("right"),e.parentNode.parentNode.addClass("show")):e.toggleClass("wrong")})}),$d.each(".quiz > p",function(e){e.addEventListener("click",function(a){e.parentNode.toggleClass("show")})}),$d.each(".quiz > p:first-child",function(e){var a=e.parentNode,i="choice";(a.hasClass("true")||a.hasClass("false"))&&(i="true_false"),a.hasClass("multi")&&(i="multiple"),a.hasClass("fill")&&(i="gap_fill"),a.hasClass("essay")&&(i="essay"),e.attr("data-type",LOCAL.quiz[i])}),$d.each(".quiz .mistake",function(e){e.attr("data-type",LOCAL.quiz.mistake)}),$d.each("div.tags a",function(e){e.className=["primary","success","info","warning","danger"][Math.floor(5*Math.random())]}),$d.each("#artDetail div.player",function(e){mediaPlayer(e,{type:e.attr("data-type"),mode:"order",btns:[]}).player.load(JSON.parse(e.attr("data-src"))).fetch()})};$d.each("li ruby",function(e){var a=e.parentNode;(a="LI"!=e.parentNode.tagName?e.parentNode.parentNode:a).addClass("ruby")}),$d.each("#artDetail table",function(e){e.wrap({className:"table-container"})}),$d.each(".highlight > .table-container",function(e){e.className="code-container"}),$d.each("figure.highlight",function(e){var a=e.child(".code-container"),i=e.child("figcaption");function n(){e.removeClass("fullscreen"),e.scrollTop=0,BODY.removeClass("fullscreen"),l.child(".ic").className="ic i-expand"}e.insertAdjacentHTML("beforeend",'<div class="operation"><span class="breakline-btn"><i class="ic i-align-left"></i></span><span class="copy-btn"><i class="ic i-clipboard"></i></span><span class="fullscreen-btn"><i class="ic i-expand"></i></span></div>'),(r=e.child(".copy-btn")).addEventListener("click",function(e){var i=e.currentTarget,n="",s="";a.find("pre").forEach(function(e){s+=n+e.innerText,n="\n"}),clipBoard(s,function(e){i.child(".ic").className=e?"ic i-check":"ic i-times",i.blur(),showtip(LOCAL.copyright)})}),r.addEventListener("mouseleave",function(e){setTimeout(function(){e.target.child(".ic").className="ic i-clipboard"},1e3)}),e.child(".breakline-btn").addEventListener("click",function(a){a=a.currentTarget,e.hasClass("breakline")?(e.removeClass("breakline"),a.child(".ic").className="ic i-align-left"):(e.addClass("breakline"),a.child(".ic").className="ic i-align-justify")});var s,t,c,l=e.child(".fullscreen-btn"),r=function(a){a.currentTarget,e.hasClass("fullscreen")?(n(),c&&c(),pageScroll(e)):(e.addClass("fullscreen"),BODY.addClass("fullscreen"),l.child(".ic").className="ic i-compress",t&&t())};l.addEventListener("click",r),i&&i.addEventListener("click",r),a&&300<a.height()&&(a.style.maxHeight="300px",a.insertAdjacentHTML("beforeend",'<div class="show-btn"><i class="ic i-angle-down"></i></div>'),(s=a.child(".show-btn")).child("i"),t=function(){a.style.maxHeight="",s.addClass("open")},c=function(){a.style.maxHeight="300px",s.removeClass("open")},s.addEventListener("click",function(e){s.hasClass("open")?(n(),c(),pageScroll(a)):t()}))}),$d.each("pre.mermaid > svg",function(e){e.style.maxWidth=""}),$d.each(".reward button",function(e){e.addEventListener("click",function(e){e.preventDefault();var a=$d("#qr");"inline-flex"===a.display()?transition(a,0):transition(a,1,function(){a.display("inline-flex")})})}),$d.each(".quiz > ul.options li",function(e){e.addEventListener("click",function(a){e.hasClass("correct")?(e.toggleClass("right"),e.parentNode.parentNode.addClass("show")):e.toggleClass("wrong")})}),$d.each(".quiz > p",function(e){e.addEventListener("click",function(a){e.parentNode.toggleClass("show")})}),$d.each(".quiz > p:first-child",function(e){var a=e.parentNode,i="choice";(a.hasClass("true")||a.hasClass("false"))&&(i="true_false"),a.hasClass("multi")&&(i="multiple"),a.hasClass("fill")&&(i="gap_fill"),a.hasClass("essay")&&(i="essay"),e.attr("data-type",LOCAL.quiz[i])}),$d.each(".quiz .mistake",function(e){e.attr("data-type",LOCAL.quiz.mistake)}),$d.each("div.tags a",function(e){e.className=["primary","success","info","warning","danger"][Math.floor(5*Math.random())]}),$d.each("#artDetail div.player",function(e){mediaPlayer(e,{type:e.attr("data-type"),mode:"order",btns:[]}).player.load(JSON.parse(e.attr("data-src"))).fetch()});</script><script>$(function(){$("pre").wrap('<div class="code-area" style="position: relative"></div>')});</script><script>$(function(){var e=$('<div class="code_lang" title="代码语言"></div>');$("pre").before(e),$("pre").each(function(){var e=$(this).attr("class");if(!e)return!0;e=e.replace("line-numbers","").trim().replace("language-","").trim(),$(this).siblings(".code_lang").text(e)})});</script><script>$(function(){var e=$('<i class="fas fa-copy code_copy" title="复制代码" aria-hidden="true"></i>'),o=$('<div class="codecopy_notice"></div>');$(".code-area").prepend(e),$(".code-area").prepend(o),$(".code-area .fa-copy").on("click",function(){var e=window.getSelection(),o=document.createRange();o.selectNodeContents($(this).siblings("pre").find("code")[0]),e.removeAllRanges(),e.addRange(o),e.toString(),function(e){if(document.queryCommandSupported&&document.queryCommandSupported("copy"))try{document.execCommand("copy"),$(e).prev(".codecopy_notice").text("复制成功").animate({opacity:1,top:30},450,function(){setTimeout(function(){$(e).prev(".codecopy_notice").animate({opacity:0,top:0},650)},400)})}catch(o){return $(e).prev(".codecopy_notice").text("复制失败").animate({opacity:1,top:30},650,function(){setTimeout(function(){$(e).prev(".codecopy_notice").animate({opacity:0,top:0},650)},400)})}else $(e).prev(".codecopy_notice").text("浏览器不支持复制")}(this),e.removeAllRanges()})});</script><script>$(function(){var e=$('<i class="fas fa-angle-up code-expand" aria-hidden="true"></i>');$(".code-area").prepend(e),$(".code-expand").on("click",function(){$(this).parent().hasClass("code-closed")?($(this).siblings("pre").find("code").show(),$(this).parent().removeClass("code-closed")):($(this).siblings("pre").find("code").hide(),$(this).parent().addClass("code-closed"))})});</script><script>$(function(){new Viewer(document.getElementById("post-main-content"))});</script></div><aside class=column><div class=card><div class=card-content><div class=media><div class=media-left><figure class="image is-48x48"><img src=/assets/avatar.gif alt=Timeliar></figure></div><div class=media-content><p class="title is-4">Timeliar</p><p class="subtitle is-6">还有很多代码要写</p></div></div><div class=content>还有很多代码要写</div></div><footer class=card-footer><a href=mailto:timeliar.lee@gmail.com class=card-footer-item><span class=icon><i class="fas fa-lg fa-envelope"></i></span></a><a target=_blank rel=noopener href=https://github.com/timeliar class=card-footer-item><span class=icon><i class="fab fa-lg fa-github-square"></i></span></a><a target=_blank rel=noopener href=https://about.me/timeliar class=card-footer-item><span class=icon><i class="fas fa-lg fa-id-card"></i></span></a></footer></div><div class=is-sticky><div class="card mt-4"><div class=card-content><progress class="progress is-info" id=tocProgress max=100></progress><ol class=menu-list><li class="menu-list-item menu-list-level-1"><a class=menu-list-link><span class=menu-list-text>起因</span></a></li><li class="menu-list-item menu-list-level-1"><a class=menu-list-link><span class=menu-list-text>解释</span></a></li></ol></div></div><script>function updatePostProgress(){var o=$(window).scrollTop(),t=$("#post-main-content").height(),e=$("#header-navbar").height(),r=$(window).height();$("#tocProgress").attr("value",(o+r-e)/t*100)}$(window).scroll(function(){updatePostProgress()});</script><div class="card mt-2"><div class=card-content><div><a href="/tags/java/" class="tag is-info icon-text"><span class="icon mr-1"><i class="fas fa-tag"></i></span> Java</a></div><div class=mt-2></div></div></div></div></aside></div></main><footer class="footer mt-4"><div class="content has-text-centered"><p>&copy; 2021 <strong>Timeliar's Blog</strong> Powered by <a href="https://hexo.io/" class=link-secondary _target=blank>Hexo</a> and <a target=_blank rel=noopener href=https://github.com/timeliar/hexo-theme-ginkgo>Ginkgo</a> theme</p></div></footer></body></html>